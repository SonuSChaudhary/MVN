# Maven
# Build your Java project and run tests with Apache Maven.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/java

trigger:
- master

pool:
  vmImage: ubuntu-latest


jobs:
- job: test
 
  pool:
    name: Default
  steps:
    - task: emailReportTask@1
      inputs:
        sendMailConditionConfig: 'Always'
        subject: '[{environmentStatus}] {passPercentage} tests passed in $(Release.EnvironmentName) stage for $(Build.BuildNumber)'
        toAddress: 'swathi9796@gmail.com'
        defaultDomain: 'gmail.com'
        emailBodyFormat: 'InLine'
        emailBody: 'Build notify'
        groupTestResultsBy: 'run'
        includeCommits: true
        maxTestFailuresToShow: '15'
        includeOthersInTotal: false
        usePreviousEnvironment: false
        smtpConnectionEndpoint: 'SMTPconnectiontest'
      condition: always()

- job: Bar
  dependsOn: test
  condition: failed()
  steps:
  - task: Bash@3
    inputs:
      targetType: 'inline'
      script: 'curl -H ''Content-Type: application/json'' -d ''{"text": "Hello World"}'' https://accenture.webhook.office.com/webhookb2/c6aea564-fe88-48b4-9fa6-a737f1425035@e0793d39-0939-496d-b129-198edd916feb/IncomingWebhook/15e5aab7761341388f908a5fe592fbc9/570d319c-d336-48a2-b32e-88ba623aa565'
      
  
   